<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd">
    <changeSet author="gyakornok (generated)" id="1596449557845-1">
        <createTable tableName="BOARD">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="CONSTRAINT_3"/>
            </column>
            <column name="LONG_NAME" type="VARCHAR(255)"/>
            <column name="SHORT_NAME" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-2">
        <createTable tableName="BOARD_THREADS">
            <column name="BOARD_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="THREADS_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-3">
        <createTable tableName="COMMENT_NOTIFICATION">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="CONSTRAINT_F"/>
            </column>
            <column name="READ" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="ORIGINAL_REPLY_ID" type="BIGINT"/>
            <column name="OTHER_USERS_REPLY_ID" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-4">
        <createTable tableName="REPLY">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="CONSTRAINT_4"/>
            </column>
            <column name="CONTENT" type="VARCHAR(255)"/>
            <column name="DATE" type="TIMESTAMP"/>
            <column name="IMAGE" type="VARCHAR(255)"/>
            <column name="VOTES" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="THREAD_ID" type="BIGINT"/>
            <column name="USER_ID" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-5">
        <createTable tableName="THREAD">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="CONSTRAINT_9"/>
            </column>
            <column name="TITLE" type="VARCHAR(255)"/>
            <column name="BOARD_ID" type="BIGINT"/>
            <column name="USER_ID" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-6">
        <createTable tableName="THREAD_REPLIES">
            <column name="THREAD_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="REPLIES_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-7">
        <createTable tableName="USER">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="CONSTRAINT_2"/>
            </column>
            <column name="EMAIL" type="VARCHAR(255)"/>
            <column name="IS_ADMIN" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="PASSWORD_HASH" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-8">
        <createTable tableName="USER_COMMENT_NOTIFICATIONS">
            <column name="USER_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="COMMENT_NOTIFICATIONS_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-9">
        <createTable tableName="USER_REPLIES">
            <column name="USER_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="REPLIES_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-10">
        <createTable tableName="USER_THREADS">
            <column name="USER_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="THREADS_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-11">
        <createTable tableName="USER_VOTE_NOTIFICATIONS">
            <column name="USER_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="VOTE_NOTIFICATIONS_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-12">
        <createTable tableName="VOTE_NOTIFICATION">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="CONSTRAINT_42"/>
            </column>
            <column name="READ" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="VOTE_TYPE" type="INT"/>
            <column name="ORIGINAL_REPLY_ID" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-13">
        <addUniqueConstraint columnNames="REPLIES_ID" constraintName="UK_7W4NP129IP0BJ0X3ESPUWJO2B" tableName="THREAD_REPLIES"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-14">
        <addUniqueConstraint columnNames="THREADS_ID" constraintName="UK_C5O765T5W6LGQJAL28BO6JD9U" tableName="USER_THREADS"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-15">
        <addUniqueConstraint columnNames="THREADS_ID" constraintName="UK_E1QT2OFYF5RBCVYNQL5IFROVF" tableName="BOARD_THREADS"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-16">
        <addUniqueConstraint columnNames="REPLIES_ID" constraintName="UK_EQAEOXH5KOJQ4EF7R7QYFM27O" tableName="USER_REPLIES"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-17">
        <addUniqueConstraint columnNames="COMMENT_NOTIFICATIONS_ID" constraintName="UK_KI5Y3ERQ6ECSKJNKY75DOR7OY" tableName="USER_COMMENT_NOTIFICATIONS"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-18">
        <addUniqueConstraint columnNames="VOTE_NOTIFICATIONS_ID" constraintName="UK_NHC52C5EO0N5QGQF8RV1JT8D6" tableName="USER_VOTE_NOTIFICATIONS"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-19">
        <createIndex indexName="FK2RMKR0VLIMYHLY7N8460YSFL9_INDEX_9" tableName="THREAD">
            <column name="USER_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-20">
        <createIndex indexName="FK2X40PQBVAIHS604BFPK0R4PFA_INDEX_4" tableName="VOTE_NOTIFICATION">
            <column name="ORIGINAL_REPLY_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-21">
        <createIndex indexName="FK53UN5ADSSCUFCI6L77TY5TOPH_INDEX_9" tableName="USER_THREADS">
            <column name="USER_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-22">
        <createIndex indexName="FKAPYYXLGNTERTU5OKPKR685IR9_INDEX_4" tableName="REPLY">
            <column name="USER_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-23">
        <createIndex indexName="FKBEJDSQ1G5QJJ8UMHR10NWGIAN_INDEX_2" tableName="THREAD_REPLIES">
            <column name="THREAD_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-24">
        <createIndex indexName="FKDGHPV747ST9DW2W52G2HGTMHB_INDEX_B" tableName="BOARD_THREADS">
            <column name="BOARD_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-25">
        <createIndex indexName="FKF6PX7P0PS15XFUA6YD7YS8F6X_INDEX_F" tableName="COMMENT_NOTIFICATION">
            <column name="OTHER_USERS_REPLY_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-26">
        <createIndex indexName="FKMA462CWFKRLTWXAA8AXFOB25O_INDEX_4" tableName="REPLY">
            <column name="THREAD_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-27">
        <createIndex indexName="FKMHCS3JVPY4XQXNQW0F406U7GK_INDEX_9" tableName="THREAD">
            <column name="BOARD_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-28">
        <createIndex indexName="FKNF325W3TPKPX3CYY75DLB8RSW_INDEX_A" tableName="USER_COMMENT_NOTIFICATIONS">
            <column name="USER_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-29">
        <createIndex indexName="FKOUOJK3O2UEGKMOQGNRJO0HGUN_INDEX_F" tableName="COMMENT_NOTIFICATION">
            <column name="ORIGINAL_REPLY_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-30">
        <createIndex indexName="FKQXYOFM1R51JKWPJPY97AEM4MW_INDEX_2" tableName="USER_VOTE_NOTIFICATIONS">
            <column name="USER_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-31">
        <createIndex indexName="FKTECVEG14E70YGSFE2EF7S1KJV_INDEX_2" tableName="USER_REPLIES">
            <column name="USER_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-32">
        <addForeignKeyConstraint baseColumnNames="THREADS_ID" baseTableName="USER_THREADS" constraintName="FK1GJB5ODY6UU6XX5UOJ7RGDQ6A" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="THREAD" validate="true"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-33">
        <addForeignKeyConstraint baseColumnNames="USER_ID" baseTableName="THREAD" constraintName="FK2RMKR0VLIMYHLY7N8460YSFL9" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="USER" validate="true"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-34">
        <addForeignKeyConstraint baseColumnNames="ORIGINAL_REPLY_ID" baseTableName="VOTE_NOTIFICATION" constraintName="FK2X40PQBVAIHS604BFPK0R4PFA" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="REPLY" validate="true"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-35">
        <addForeignKeyConstraint baseColumnNames="USER_ID" baseTableName="USER_THREADS" constraintName="FK53UN5ADSSCUFCI6L77TY5TOPH" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="USER" validate="true"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-36">
        <addForeignKeyConstraint baseColumnNames="THREADS_ID" baseTableName="BOARD_THREADS" constraintName="FK6NEBM55AF0S32FGQH6DF34BTK" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="THREAD" validate="true"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-37">
        <addForeignKeyConstraint baseColumnNames="USER_ID" baseTableName="REPLY" constraintName="FKAPYYXLGNTERTU5OKPKR685IR9" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="USER" validate="true"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-38">
        <addForeignKeyConstraint baseColumnNames="REPLIES_ID" baseTableName="USER_REPLIES" constraintName="FKBAP73JYOJG0ODWERTLRU4A5AX" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="REPLY" validate="true"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-39">
        <addForeignKeyConstraint baseColumnNames="THREAD_ID" baseTableName="THREAD_REPLIES" constraintName="FKBEJDSQ1G5QJJ8UMHR10NWGIAN" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="THREAD" validate="true"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-40">
        <addForeignKeyConstraint baseColumnNames="VOTE_NOTIFICATIONS_ID" baseTableName="USER_VOTE_NOTIFICATIONS" constraintName="FKCV6UHVT15CPDEAANR6G2XPMPM" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="VOTE_NOTIFICATION" validate="true"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-41">
        <addForeignKeyConstraint baseColumnNames="BOARD_ID" baseTableName="BOARD_THREADS" constraintName="FKDGHPV747ST9DW2W52G2HGTMHB" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="BOARD" validate="true"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-42">
        <addForeignKeyConstraint baseColumnNames="OTHER_USERS_REPLY_ID" baseTableName="COMMENT_NOTIFICATION" constraintName="FKF6PX7P0PS15XFUA6YD7YS8F6X" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="REPLY" validate="true"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-43">
        <addForeignKeyConstraint baseColumnNames="THREAD_ID" baseTableName="REPLY" constraintName="FKMA462CWFKRLTWXAA8AXFOB25O" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="THREAD" validate="true"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-44">
        <addForeignKeyConstraint baseColumnNames="BOARD_ID" baseTableName="THREAD" constraintName="FKMHCS3JVPY4XQXNQW0F406U7GK" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="BOARD" validate="true"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-45">
        <addForeignKeyConstraint baseColumnNames="USER_ID" baseTableName="USER_COMMENT_NOTIFICATIONS" constraintName="FKNF325W3TPKPX3CYY75DLB8RSW" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="USER" validate="true"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-46">
        <addForeignKeyConstraint baseColumnNames="ORIGINAL_REPLY_ID" baseTableName="COMMENT_NOTIFICATION" constraintName="FKOUOJK3O2UEGKMOQGNRJO0HGUN" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="REPLY" validate="true"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-47">
        <addForeignKeyConstraint baseColumnNames="REPLIES_ID" baseTableName="THREAD_REPLIES" constraintName="FKP25JHN4NFAXJE22CG72SJ2RYP" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="REPLY" validate="true"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-48">
        <addForeignKeyConstraint baseColumnNames="COMMENT_NOTIFICATIONS_ID" baseTableName="USER_COMMENT_NOTIFICATIONS" constraintName="FKPJUWTQWBME5B4PQLOW38YPWLT" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="COMMENT_NOTIFICATION" validate="true"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-49">
        <addForeignKeyConstraint baseColumnNames="USER_ID" baseTableName="USER_VOTE_NOTIFICATIONS" constraintName="FKQXYOFM1R51JKWPJPY97AEM4MW" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="USER" validate="true"/>
    </changeSet>
    <changeSet author="gyakornok (generated)" id="1596449557845-50">
        <addForeignKeyConstraint baseColumnNames="USER_ID" baseTableName="USER_REPLIES" constraintName="FKTECVEG14E70YGSFE2EF7S1KJV" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="USER" validate="true"/>
    </changeSet>
</databaseChangeLog>
